<div>
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h1 data-cy="registerTitle">Registrazione</h1>

      <div class="alert alert-success" *ngIf="success"><strong>Registrazione effettuata!</strong> 
        Controlla la tua mail per attivare il tuo account!</div>

      <div class="alert alert-danger" *ngIf="error"><strong>Registrazione Fallita!</strong> Riprova.</div>

      <div class="alert alert-danger" *ngIf="errorUserExists">
        <strong>Username già in uso!</strong> Scegline un altro.
      </div>

      <div class="alert alert-danger" *ngIf="errorEmailExists"><strong>Email già in uso!</strong> Scegline un'altra.</div>

      <div class="alert alert-danger" *ngIf="doNotMatch">Le password non coincidono!</div>
    </div>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-8">
      <form name="form" role="form" (ngSubmit)="register()" [formGroup]="registerForm" *ngIf="!success">
        <div class="form-group">
          <label class="form-control-label" for="login">Username</label>
          <input type="text" class="form-control" id="login" name="login" placeholder="Username"
            formControlName="login" data-cy="username" #login />

          <div
            *ngIf="registerForm.get('login')!.invalid && (registerForm.get('login')!.dirty || registerForm.get('login')!.touched)">
            <small class="form-text text-danger" *ngIf="registerForm.get('login')?.errors?.required"> L'username è obbligatorio. </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('login')?.errors?.minlength">
              Il tuo username deve avere almeno un carattere.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('login')?.errors?.maxlength">
              Il tuo username non può essere più lungo di 50 caratteri.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('login')?.errors?.pattern">
              Il tuo username può contenere solo lettere e numeri.
            </small>
          </div>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="firstName">Nome</label>
          <input type="text" class="form-control" id="firstName" name="firstName" placeholder="Nome"
            formControlName="firstName" data-cy="firstName" #firstName />
        </div>

        <div class="form-group">
          <label class="form-control-label" for="lastName">Cognome</label>
          <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Cognome"
            formControlName="lastName" data-cy="lastName" #lastName />
        </div>

        <div class="form-group">
          <label class="form-control-label" for="email">Email</label>
          <input type="email" class="form-control" id="email" name="email" placeholder="Email"
            formControlName="email" data-cy="email" />

          <div
            *ngIf="registerForm.get('email')!.invalid && (registerForm.get('email')!.dirty || registerForm.get('email')!.touched)">
            <small class="form-text text-danger" *ngIf="registerForm.get('email')?.errors?.required"> L'email è obbligatoria. </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('email')?.errors?.invalid"> La tua mail non è valida. </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('email')?.errors?.minlength">
              La tua email deve contenere almeno 5 caratteri.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('email')?.errors?.maxlength">
              La tua email non può essere più lunga di 100 caratteri.
            </small>
          </div>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="password">Password</label>
          <input type="password" class="form-control" id="password" name="password" placeholder="Password"
            formControlName="password" data-cy="firstPassword" />

          <div
            *ngIf="registerForm.get('password')!.invalid && (registerForm.get('password')!.dirty || registerForm.get('password')!.touched)">
            <small class="form-text text-danger" *ngIf="registerForm.get('password')?.errors?.required"> La tua password è obbligatoria. </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('password')?.errors?.minlength">
              La tua password deve contenere almeno 4 caratteri.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('password')?.errors?.maxlength">
              La tua password non può essere più lunga di 50 caratteri.
            </small>
          </div>

          <jhi-password-strength-bar [passwordToCheck]="registerForm.get('password')!.value">
          </jhi-password-strength-bar>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="confirmPassword">Conferma password</label>
          <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
            placeholder="Conferma password" formControlName="confirmPassword" data-cy="secondPassword" />

          <div *ngIf="
              registerForm.get('confirmPassword')!.invalid &&
              (registerForm.get('confirmPassword')!.dirty || registerForm.get('confirmPassword')!.touched)
            ">
            <small class="form-text text-danger" *ngIf="registerForm.get('confirmPassword')?.errors?.required">
              La conferma della password è obbligatoria.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('confirmPassword')?.errors?.minlength">
              La conferma della tua password deve essere lunga almeno 4 caratteri.
            </small>

            <small class="form-text text-danger" *ngIf="registerForm.get('confirmPassword')?.errors?.maxlength">
              La conferma della tua password non può essere più lunga di 50 caratteri.
            </small>
          </div>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="telefono">Telefono</label>
          <input type="text" class="form-control" id="telefono" name="telefono" placeholder="Il tuo telefono"
            formControlName="telefono" data-cy="telefono" #telefono />
        </div>

        <div class="form-group">
          <label class="form-control-label" for="indirizzo">Indirizzo</label>
          <input type="text" class="form-control" id="indirizzo" name="indirizzo" placeholder="Il tuo indirizzo"
            formControlName="indirizzo" data-cy="indirizzo" #indirizzo />
        </div>

        <div class="form-group" name="ruolo" id="ruolo">
          <label for="ruolo">Ruolo</label>
          <div>
            <input type="radio" id="venditore" name="ruolo" value="VENDITORE" formControlName="ruolo" data-cy="ruolo" #ruolo>
            <label class="form-control-label" for="venditore">Venditore</label>
          </div>
          <div>
            <input type="radio" id="cliente" name="ruolo" value="CLIENTE" formControlName="ruolo" data-cy="ruolo" #ruolo>
            <label class="form-control-label" for="cliente">Cliente</label>
          </div>
        </div>

        <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary"
          data-cy="submit">Registrati</button>
      </form>
    </div>
  </div>
</div>
